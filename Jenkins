pipeline {
    agent any

    stages {
        stage('GitPipeline') {
            steps {
                git credentialsId: 'Git', url: 'https://github.com/gitika741993/JenkinsJfrogIntegrationSpicejet.git'
'
            }
        }
       stage('build && SonarQube analysis') {
            steps {
             withSonarQubeEnv('SonarQube') {
                bat 'mvn clean package sonar:sonar'
              }
                }
            }
    env.ARTIFACTORY = 'True'
    if(env.ARTIFACTORY == 'True')
    {
        stage('Deploying to Artifactory')
        {
            FAILED_STAGE = env.STAGE_NAME
            bat 'mvn deploy'
        }
    }
        
    }
}
